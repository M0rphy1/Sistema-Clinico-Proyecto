<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Citas</title>
</head>
<body>
  <h1>Registro de Citas</h1>
  <form action="/api/citas" method="POST">
    <label for="idCliente">ID Cliente:</label>
    <input type="number" id="idCliente" name="idCliente" required><br><br>

    <label for="idMascota">ID Mascota:</label>
    <input type="number" id="idMascota" name="idMascota"><br><br>

    <label for="fechaCita">Fecha y Hora de la Cita:</label>
    <input type="datetime-local" id="fechaCita" name="fechaCita" required><br><br>

    <label for="descripcion">Descripción:</label><br>
    <textarea id="descripcion" name="descripcion" rows="4" cols="50"></textarea><br><br>

    <label for="estado">Estado:</label>
    <select id="estado" name="estado" required>
      <option value="confirmado">Confirmado</option>
      <option value="pendiente">Pendiente</option>
      <option value="cancelado">Cancelado</option>
      <option value="emergencia">Emergencia</option>
    </select><br><br>

    <label for="idUsuario">ID Usuario:</label>
    <input type="number" id="idUsuario" name="idUsuario" required><br><br>

    <label for="idMedicamento">ID Medicamento:</label>
    <input type="number" id="idMedicamento" name="idMedicamento" required><br><br>

    <label for="idSuministro">ID Suministro:</label>
    <input type="number" id="idSuministro" name="idSuministro" required><br><br>

    <button type="submit">Guardar Cita</button>
  </form>

  <hr>

  <h2>Listado de Citas</h2>
  <ul id="listaCitas"></ul>

  <script>
    // Función para cargar y mostrar las citas
    async function cargarCitas() {
      const response = await fetch('/api/citas');
      const citas = await response.json();

      const listaCitas = document.getElementById('listaCitas');
      listaCitas.innerHTML = '';

      citas.forEach(cita => {
        const listItem = document.createElement('li');
        listItem.textContent = `ID: ${cita.idCita} - Cliente: ${cita.idCliente} - Fecha: ${new Date(cita.fechaCita).toLocaleString()} - Estado: ${cita.estado}`;
        listaCitas.appendChild(listItem);
      });
    }

    cargarCitas();
  </script>
</body>
</html>

